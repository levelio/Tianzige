# 天天识字 - 汉字书写动画应用设计文档

**日期**: 2025-02-26
**目标用户**: 3-5岁学前儿童
**技术栈**: React + TanStack Router + Tailwind CSS + HanziWriter

---

## 1. 项目概述

开发一个面向学前儿童的汉字书写动画演示网站，通过有趣的交互和视觉反馈帮助儿童学习汉字笔画顺序和书写方法。

### 核心功能
- 支持输入汉字列表，在界面上左右切换汉字
- 播放当前汉字笔画动画
- 描红练习模式，支持用户跟随笔画练习
- 音效反馈和庆祝动画

### 设计风格
- 参考 Duolingo：圆润吉祥物、明快渐变背景、Q版表情
- 响应式设计：支持手机、平板、桌面设备

---

## 2. 页面布局结构

### 单页面卡片式布局

```
┌─────────────────────────────────────┐
│  [吉祥物]  天天识字 🎯              │ ← 顶部导航栏
├─────────────────────────────────────┤
│                                     │
│         ◀ ─ ─ ─ ─ ─ ─ ▶            │ ← 大型左右切换按钮
│                                     │
│      ┌─────────────────┐            │
│      │                 │            │
│      │   汉字展示区    │            │ ← HanziWriter 画布
│      │                 │            │
│      └─────────────────┘            │
│                                     │
│   [👀 观看模式] [✏️ 书写模式]      │ ← 模式切换
│                                     │
│   ▶️ 播放动画  🔄 重播              │ ← 控制按钮
│                                     │
├─────────────────────────────────────┤
│  [⭐ 我的汉字] [📚 汉字集] [⚙️设置] │ ← 底部导航
└─────────────────────────────────────┘
```

---

## 3. 响应式设计

### 响应式断点

| 元素 | 手机 (375px+) | 平板/桌面 (768px+) |
|------|---------------|-------------------|
| 汉字画布 | 300×300 | 400×400 |
| 按钮 | 48px 高度 | 56px 高度 |
| 字体大小 | 16px | 18px |
| 导航按钮 | 固定底部 | 底部横向排列 |

### 圆润风格设计参数
- **按钮圆角**: `rounded-2xl` (16px) 或 `rounded-3xl` (24px)
- **卡片圆角**: `rounded-3xl` (24px)

### 配色方案
- 主色: `#58CC02` (多邻国绿)
- 次色: `#FFB800` (活力黄)
- 强调色: `#FF9600` (热情橙)
- 背景渐变: `from-emerald-50 to-teal-50`

---

## 4. 组件结构

```
src/
├── components/
│   ├── HanziCanvas.tsx          # HanziWriter 封装组件
│   ├── NavigationButtons.tsx    # 左右切换按钮
│   ├── ControlButtons.tsx       # 播放/重播按钮
│   ├── ModeSwitcher.tsx         # 观看/书写模式切换
│   ├── Celebration.tsx          # 庆祝动画（星星/烟花）
│   ├── Mascot.tsx              # 吉祥物组件
│   └── AudioPlayer.tsx         # 音效播放器
├── stores/
│   └── hanziStore.ts           # 汉字状态管理
├── data/
│   └── presets.ts              # 预设汉字集
└── routes/
    ├── index.tsx               # 主页面
    ├── presets.tsx             # 汉字集选择页
    └── custom.tsx              # 自定义汉字页
```

---

## 5. 数据流设计

```typescript
interface HanziState {
  // 当前汉字列表
  characters: string[]
  // 当前索引
  currentIndex: number
  // 当前模式：'watch' | 'practice'
  mode: 'watch' | 'practice'
  // 是否加载中
  isLoading: boolean

  // 操作
  nextCharacter: () => void
  previousCharacter: () => void
  setCharacters: (chars: string[]) => void
  setMode: (mode: 'watch' | 'practice') => void
}
```

### 预设汉字集

```typescript
const presets = {
  basic: {
    name: "基础字",
    icon: "🔤",
    characters: ["一", "二", "三", "人", "大", "小", "上", "下"]
  },
  nature: {
    name: "大自然",
    icon: "🌳",
    characters: ["山", "水", "火", "日", "月", "云", "雨", "雪"]
  },
  animals: {
    name: "小动物",
    icon: "🐱",
    characters: ["人", "马", "牛", "羊", "鸟", "鱼", "虫", "犬"]
  }
}
```

---

## 6. 交互流程

```
启动应用
    │
    ▼
选择汉字集 / 自定义输入
    │
    ▼
┌───────────────┐
│   汉字卡片页  │
└───────────────┘
    │
    ├─► [◀] 上一个汉字
    │
    ├─► [▶] 下一个汉字
    │
    ├─► [观看模式] → 自动播放笔画动画
    │                  └─► 播放完成 → ✅ 提示音
    │
    ├─► [书写模式] → 用户描红练习
    │                  ├─► 笔画正确 → ✅ 叮！
    │                  ├─► 笔画错误 → 🔄 引导回正确位置
    │                  └─► 全部完成 → 🎉 庆祝动画
    │
    └─► [🔄 重播] → 重新播放当前汉字
```

---

## 7. 模式对比

| 功能 | 观看模式 | 书写模式 |
|------|----------|----------|
| 画布交互 | 禁用 | 启用描红 |
| 播放按钮 | 显示 | 隐藏（可重播演示）|
| 提示引导 | 无 | 高亮下一笔画 |
| 完成反馈 | 无 | 庆祝动画 |

---

## 8. 音效设计

| 场景 | 音效 | 音效描述 |
|------|------|----------|
| 切换汉字 | `whoosh.mp3` | 轻快滑动声 |
| 播放动画 | `pop.mp3` | 轻微弹出声 |
| 笔画正确 | `ding.mp3` | 清脆叮声 |
| 笔画错误 | `boing.mp3` | 弹性提示音 |
| 全部完成 | `celebration.mp3` | 欢快音乐 |
| 点击按钮 | `click.mp3` | 轻柔点击声 |

---

## 9. 庆祝动画

```typescript
type CelebrationType = 'stars' | 'confetti' | 'fireworks'

// 触发条件：
// 1. 完成描红练习（所有笔画正确）
// 2. 连续完成 5 个汉字（额外大奖）
```

---

## 10. 吉祥物设计

- **形象**: 一只圆滚滚的绿色小猫咪（呼应多邻国猫头鹰）
- **位置**: 顶部 Logo 旁 + 空闲状态时在画布旁出现
- **互动**: 完成汉字时眨眼/跳跃

---

## 11. 技术依赖

```bash
# HanziWriter 核心库
pnpm add hanzi-writer

# 庆祝动画效果
pnpm add canvas-confetti

# 音效播放库
pnpm add use-sound
```

---

## 12. 实现步骤

1. HanziCanvas 组件 - 封装 HanziWriter API
2. hanziStore - 创建状态管理
3. 主页面布局 - 响应式卡片设计
4. 导航控制 - 左右切换逻辑
5. 模式切换 - 观看vs书写模式
6. 预设汉字集 - 预设数据+自定义输入页面
7. 音效集成 - 各场景音效播放
8. 庆祝动画 - 完成时的视觉反馈
9. 吉祥物组件 - 可爱的角色设计
10. 响应式优化 - 移动端适配
